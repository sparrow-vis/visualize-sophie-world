<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sophie's World</title>
    <style>
      * {
        margin: 0px;
        padding: 0px;
      }

      body,
      .container {
        background: #ddd;
      }

      header {
        height: 56px;
        position: fixed;
        left: 0px;
        top: 0px;
        background: white;
        width: 100%;
        line-height: 56px;
        padding-left: 0.5em;
      }

      .chart {
        border-radius: 5px;
        margin-left: 16px;
        margin-top: 16px;
        background: white;
        float: left;
        position: relative;
      }

      .container {
        margin-top: 56px;
        height: calc(100% - 56px);
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Sophie's World</h1>
    </header>
    <section class="container">
      <div class="chart" id="c1"></div>
      <div class="chart" id="c2"></div>
      <div class="chart" id="c3"></div>
      <div class="chart" id="c4"></div>
    </section>
  </body>
  <script type="module">
    import countrys from "./data/countrys.js";
    import philosophers from "./data/philosophers.js";
    import { circlePacking } from "./charts/circle-packing.js";
    import { forceGraph } from "./charts/force-graph.js";
    import { geoMap } from "./charts/geo-map.js";
    import { wordCloud } from "./charts/word-cloud.js";

    const charts = [
      { render: wordCloud, id: "c1", data: [] },
      { render: circlePacking, id: "c2", data: [] },
      { render: forceGraph, id: "c3", data: [] },
      { render: geoMap, id: "c4", data: { countrys, philosophers } },
    ];

    for (const { render, id, data } of charts) {
      render(Container(id), size(id), data);
    }

    function Container(id) {
      const container = document.getElementById(id);
      const padding = 24;
      const height = (window.innerHeight - 56 - padding * 2) / 2;
      const width = (window.innerWidth - padding * 2) / 2;
      container.style.width = width + "px";
      container.style.height = height + "px";
      return container;
    }

    function size(id) {
      const container = document.getElementById(id);
      const { width, height } = container.style;
      return { width: parseFloat(width), height: parseFloat(height) };
    }
  </script>
</html>
